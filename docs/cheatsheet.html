<!-- HTML header for doxygen 1.9.1-->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" class="dark-mode">
  <head>
    <meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
    <meta http-equiv="X-UA-Compatible" content="IE=9"/>
    <meta name="viewport" content="width=device-width, initial-scale=1"/>
    <meta name="author" content="SXS Collaboration">
    <meta name="generator" content="Doxygen 1.12.0"/>
  <title>Subprocess.f: Cheatsheet</title>
  <link href="tabs.css" rel="stylesheet" type="text/css"/>
  <script type="text/javascript" src="jquery.js"></script>
  <script type="text/javascript" src="dynsections.js"></script>
  <script type="text/javascript" src="doxygen-awesome-darkmode-toggle.js"></script>
  <script type="text/javascript" src="doxygen-awesome-fragment-copy-button.js"></script>
  <script type="text/javascript" src="doxygen-awesome-paragraph-link.js"></script>
  <script type="text/javascript" src="doxygen-awesome-interactive-toc.js"></script>
  <script type="text/javascript" src="doxygen-awesome-tabs.js"></script>
  <script type="text/javascript">
      DoxygenAwesomeFragmentCopyButton.init()
      DoxygenAwesomeDarkModeToggle.init()
      DoxygenAwesomeParagraphLink.init()
      DoxygenAwesomeInteractiveToc.init()
      DoxygenAwesomeTabs.init()
  </script>
  <link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="cookie.js"></script>
  <link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
  <script type="text/x-mathjax-config">
MathJax.Hub.Config({
  extensions: ["tex2jax.js"],
  jax: ["input/TeX","output/HTML-CSS"],
});
</script>
<script type="text/javascript" async="async" src="./mathjax/MathJax.js"></script>
  <link href="doxygen.css" rel="stylesheet" type="text/css" />
  <link href="doxygen-awesome.css" rel="stylesheet" type="text/css"/>
  <link rel="stylesheet" href="devibeans.css">
  <script src="highlight.js"></script>
<script>
$(function() {
	hljs.configure({useBR: false});
	$(".fragment").each(function(i,node) {
		$(node).removeClass("fragment");
		hljs.highlightBlock(node);
	});
});
</script>
  </head>
  <body>
  <div id="top"><!-- do not remove this div, it is closed by doxygen! -->
  <div id="titlearea">
    <table cellspacing="0" cellpadding="0">
      <tbody>
        <tr style="height: 56px;">
          <td id="projectlogo"><img alt="Logo" src="logo.png" /></td>
          <td id="projectalign" style="padding-left: 0.5em;">
            <div id="projectname">
              <a href="index.html">Subprocess.f</a>
            </div>
          </td>
        </tr>
      </tbody>
    </table>
  </div>
  <!-- end header part -->
<!-- Generated by Doxygen 1.12.0 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() { codefold.init(0); });
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search',true);
  $(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function(){initNavTree('cheatsheet.html',''); initResizable(true); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div><div class="header">
  <div class="headertitle"><div class="title">Cheatsheet</div></div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p><a class="anchor" id="md__c_1_2_users_2dev_2_documents_2_git_hub_2sandbox_2subprocess_8f_2_8dox_2articles_2_cheatsheet"></a></p>
<h1><a class="anchor" id="autotoc_md0"></a>
Launching a Process</h1>
<p>To launch a process you call <code>subprocess_create</code> like so:</p>
<div class="fragment"><div class="line"><span class="keyword">const</span> <span class="keywordtype">char</span> *command_line[] = {<span class="stringliteral">&quot;echo&quot;</span>, <span class="stringliteral">&quot;\&quot;Hello, world!\&quot;&quot;</span>, NULL};</div>
<div class="line"><span class="keyword">struct </span>subprocess_s subprocess;</div>
<div class="line"><span class="keywordtype">int</span> result = subprocess_create(command_line, 0, &amp;subprocess);</div>
<div class="line"><span class="keywordflow">if</span> (0 != result) {</div>
<div class="line">  <span class="comment">// an error occurred!</span></div>
<div class="line">}</div>
</div><!-- fragment --><p>You specify an array of string for the command line - terminating the array with a <code>NULL</code> element.</p>
<p>If the process is created successfully then 0 is returned from <code>subprocess_create</code>.</p>
<h1><a class="anchor" id="autotoc_md1"></a>
Writing to the Standard Input of a Process</h1>
<p>To write to the standard input of a child process you call <code>subprocess_stdin</code> to get the FILE handle to write with, passing a previously created process, like so:</p>
<div class="fragment"><div class="line">FILE* p_stdin = subprocess_stdin(&amp;process);</div>
<div class="line">fputs(<span class="stringliteral">&quot;Hello, world!&quot;</span>, p_stdin);</div>
</div><!-- fragment --><p>Care must be taken to not write to the stdin after any call to <code>subprocess_join</code> or <code>subprocess_destroy</code>.</p>
<h1><a class="anchor" id="autotoc_md2"></a>
Reading from the Standard Output of a Process</h1>
<p>To read from the standard output of a child process you call <code>subprocess_stdout</code> to get the FILE handle to read with, passing a previously created process, like so:</p>
<div class="fragment"><div class="line">FILE* p_stdout = subprocess_stdout(&amp;process);</div>
<div class="line"><span class="keywordtype">char</span> hello_world[32];</div>
<div class="line">fgets(hello_world, 32, p_stdout);</div>
</div><!-- fragment --><p>Care must be taken to not read from the stdout after any call to <code>subprocess_destroy</code>.</p>
<h1><a class="anchor" id="autotoc_md3"></a>
Reading from the Standard Error of a Process</h1>
<p>To read from the standard error of a child process you call <code>subprocess_stderr</code> to get the FILE handle to read with, passing a previously created process, like so:</p>
<div class="fragment"><div class="line">FILE* p_stderr = subprocess_stderr(&amp;process);</div>
<div class="line"><span class="keywordtype">char</span> hello_world[32];</div>
<div class="line">fgets(hello_world, 32, p_stderr);</div>
</div><!-- fragment --><p>Care must be taken to not read from the stderr after any call to <code>subprocess_destroy</code>.</p>
<h1><a class="anchor" id="autotoc_md4"></a>
Waiting on a Process</h1>
<p>To wait for a previously created process to finish executing you call <code>subprocess_join</code> like so:</p>
<div class="fragment"><div class="line"><span class="keywordtype">int</span> process_return;</div>
<div class="line"><span class="keywordtype">int</span> result = subprocess_join(&amp;process, &amp;process_return);</div>
<div class="line"><span class="keywordflow">if</span> (0 != result) {</div>
<div class="line">  <span class="comment">// an error occurred!</span></div>
<div class="line">}</div>
</div><!-- fragment --><p>The return code of the child process is returned in the second argument (stored into <code>process_return</code> in the example above). This parameter can be <code>NULL</code> if you don't care about the process' return code.</p>
<p>If the child process encounters an unhandled exception, the return code will always be filled with a <em>non zero</em> value.</p>
<h1><a class="anchor" id="autotoc_md5"></a>
Destroying a Process</h1>
<p>To destroy a previously created process you call <code>subprocess_destroy</code> like so:</p>
<div class="fragment"><div class="line"><span class="keywordtype">int</span> result = subprocess_destroy(&amp;process);</div>
<div class="line"><span class="keywordflow">if</span> (0 != result) {</div>
<div class="line">  <span class="comment">// an error occurred!</span></div>
<div class="line">}</div>
</div><!-- fragment --><p>Note that you can destroy a process before it has completed execution - this allows you to spawn a process that would <em>outlive</em> the execution of the parent process for instance.</p>
<h1><a class="anchor" id="autotoc_md6"></a>
Terminating a Process</h1>
<p>To terminate a (possibly hung) previously created process you call <code>subprocess_terminate</code> like so:</p>
<div class="fragment"><div class="line"><span class="keywordtype">int</span> result = subprocess_terminate(&amp;process);</div>
<div class="line"><span class="keywordflow">if</span> (0 != result) {</div>
<div class="line">  <span class="comment">// an error occurred!</span></div>
<div class="line">}</div>
</div><!-- fragment --><p>Note that you still can call <code>subprocess_destroy</code>, and <code>subprocess_join</code> after calling <code>subprocess_terminate</code>, and that the return code filled by <code>subprocess_join(&amp;process, &amp;process_return)</code> is then guaranteed to be <em>non zero</em>.</p>
<h1><a class="anchor" id="autotoc_md7"></a>
Reading Asynchronously</h1>
<p>If you want to be able to read from a process <em>before</em> calling <code>subprocess_join</code> on it, you cannot use <code>subprocess_stdout</code> or <code>subprocess_stderr</code> because the various operating systems that this library supports do not allow for this.</p>
<p>Instead you first have to call <code>subprocess_create</code> and specify the <code>subprocess_option_enable_async</code> option - which enables asynchronous reading.</p>
<p>Then you must use the <code>subprocess_read_stdout</code> and <code>subprocess_read_stderr</code> helper functions to do any reading from either pipe. Note that these calls <em>may</em> block if there isn't any data ready to be read.</p>
<h1><a class="anchor" id="autotoc_md8"></a>
Using a Custom Process Environment</h1>
<p>The <code>subprocess_create_ex</code> entry-point contains an additional argument <code>environment</code>. This argument is an array of <code>FOO=BAR</code> pairs terminating in a <code>NULL</code> entry:</p>
<div class="fragment"><div class="line"><span class="keyword">const</span> <span class="keywordtype">char</span> *command_line[] = {<span class="stringliteral">&quot;echo&quot;</span>, <span class="stringliteral">&quot;\&quot;Hello, world!\&quot;&quot;</span>, NULL};</div>
<div class="line"><span class="keyword">const</span> <span class="keywordtype">char</span> *environment[] = {<span class="stringliteral">&quot;FOO=BAR&quot;</span>, <span class="stringliteral">&quot;HAZ=BAZ&quot;</span>, NULL};</div>
<div class="line"><span class="keyword">struct </span>subprocess_s subprocess;</div>
<div class="line"><span class="keywordtype">int</span> result = subprocess_create_ex(command_line, 0, environment, &amp;subprocess);</div>
<div class="line"><span class="keywordflow">if</span> (0 != result) {</div>
<div class="line">  <span class="comment">// an error occurred!</span></div>
<div class="line">}</div>
</div><!-- fragment --><p>This lets you specify custom environments for spawned subprocesses.</p>
<p>Note though that you <b>cannot</b> specify <code>subprocess_option_inherit_environment</code> with a custom environment. If you want to merge some custom environment with the parent process environment then it is up to you as the user to query the original parent variables you want to pass to the child, and specify them in the spawned process' <code>environment</code>.</p>
<h1><a class="anchor" id="autotoc_md9"></a>
Spawning a Process With No Window</h1>
<p>If the <code>options</code> argument of <code>subprocess_create</code> contains <code>subprocess_option_no_window</code> then, if the platform supports it, the process will be launched with no visible window.</p>
<div class="fragment"><div class="line"><span class="keyword">const</span> <span class="keywordtype">char</span> *command_line[] = {<span class="stringliteral">&quot;echo&quot;</span>, <span class="stringliteral">&quot;\&quot;Hello, world!\&quot;&quot;</span>, NULL};</div>
<div class="line"><span class="keyword">struct </span>subprocess_s subprocess;</div>
<div class="line"><span class="keywordtype">int</span> result = subprocess_create(command_line, subprocess_option_no_window, &amp;subprocess);</div>
<div class="line"><span class="keywordflow">if</span> (0 != result) {</div>
<div class="line">  <span class="comment">// an error occurred!</span></div>
<div class="line">}</div>
</div><!-- fragment --><p>This option is <em>only required</em> on Windows platforms at present if the behaviour is seeked for. </p>
</div></div><!-- contents -->
</div><!-- PageDoc -->
</div><!-- doc-content -->
<!-- HTML footer for doxygen 1.9.1-->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="articles.html">Examples</a></li>
    <li class="footer">
    &copy; Copyright 2017 - 2024
    <a href="LICENSE.txt" target="_blank">
    <span class="hidden-xs">Distributed under the</span>
    MIT License</a>
  </ul>
</div>
</body>
</html>
